# Generated by Django 5.0 on 2025-09-10 08:33

import django.db.models.deletion
import django.utils.timezone
import parler.fields
import parler.models
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AccompagnementCouscous',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=50, unique=True)),
                ('nom', models.CharField(max_length=100)),
            ],
        ),
        migrations.CreateModel(
            name='Categorie',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(choices=[('menu', 'Menu'), ('burger', 'Burger'), ('salade', 'Salade'), ('couscous/tajine', 'Couscous/Tajine'), ('poulet', 'Poulet'), ('pates', 'Pâtes'), ('boisson', 'Boisson'), ('dessert', 'Dessert')], max_length=100, unique=True)),
                ('icone', models.CharField(blank=True, help_text="Classe CSS de l'icône (ex : flaticon-hamburger-1)", max_length=100)),
                ('ordre', models.PositiveIntegerField(default=0, help_text="Ordre d'affichage dans le menu")),
            ],
            options={
                'ordering': ['ordre'],
            },
        ),
        migrations.CreateModel(
            name='Client',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('prenom', models.CharField(max_length=100)),
                ('numero_telephone', models.CharField(max_length=15)),
                ('adresse_facturation', models.TextField()),
                ('email', models.EmailField(max_length=254)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('session_key', models.CharField(blank=True, max_length=255, null=True)),
                ('consent_sms', models.BooleanField(default=False)),
                ('consent_email', models.BooleanField(default=False)),
                ('consent_cookies', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='ClientBlacklist',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('numero_telephone', models.CharField(blank=True, max_length=15, null=True)),
                ('raison', models.TextField(blank=True, null=True)),
                ('date_blocage', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='CodePromo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=20, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('reduction_amount', models.PositiveIntegerField()),
                ('reduction_type', models.CharField(choices=[('P', 'Pourcentage'), ('E', 'Euros')], max_length=1)),
                ('date_debut', models.DateTimeField()),
                ('date_fin', models.DateTimeField()),
            ],
        ),
        migrations.CreateModel(
            name='FormuleCouscous',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('nombre_viandes_incluses', models.PositiveIntegerField()),
                ('prix_base_ttc', models.DecimalField(decimal_places=2, max_digits=6)),
                ('description', models.TextField(blank=True)),
            ],
        ),
        migrations.CreateModel(
            name='Fournisseur',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=50, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='HoraireDisponible',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('jour', models.CharField(choices=[('LUN', 'Lundi'), ('MAR', 'Mardi'), ('MER', 'Mercredi'), ('JEU', 'Jeudi'), ('VEN', 'Vendredi'), ('SAM', 'Samedi'), ('DIM', 'Dimanche')], max_length=3)),
                ('service', models.CharField(choices=[('MIDI', 'Midi'), ('SOIR', 'Soir')], max_length=4)),
                ('heure_debut', models.TimeField()),
                ('heure_fin', models.TimeField()),
                ('intervalle', models.IntegerField(default=15)),
            ],
        ),
        migrations.CreateModel(
            name='JourFermeture',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_debut', models.DateField()),
                ('date_fin', models.DateField()),
                ('description', models.CharField(blank=True, max_length=200)),
            ],
        ),
        migrations.CreateModel(
            name='Livreur',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('telephone', models.CharField(max_length=15)),
                ('au_travaille', models.BooleanField(default=False)),
                ('is_booked', models.BooleanField(default=False)),
                ('latitude', models.FloatField(blank=True, null=True)),
                ('longitude', models.FloatField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Menu',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True)),
                ('prix_ttc', models.DecimalField(decimal_places=2, max_digits=10)),
                ('taux_tva', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, default=10, max_digits=4)),
                ('disponible', models.BooleanField(default=True)),
                ('photo', models.ImageField(blank=True, null=True, upload_to='menus/')),
            ],
        ),
        migrations.CreateModel(
            name='OptionXL',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(default='Option XL', max_length=100)),
                ('supplement', models.DecimalField(decimal_places=2, default=2.0, max_digits=5)),
                ('description', models.TextField(blank=True)),
            ],
        ),
        migrations.CreateModel(
            name='ProduitTransforme',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('categorie', models.CharField(choices=[('boulangerie', 'Boulangerie & pâtes'), ('sauces', 'Sauces & condiments'), ('viandes', 'Viandes & poissons'), ('legumes', 'Légumes préparés'), ('desserts', 'Desserts préparés')], default='boulangerie', max_length=50)),
                ('quantite_disponible', models.PositiveIntegerField(default=0)),
                ('unite', models.CharField(choices=[('g', 'grammes'), ('l', 'litres'), ('u', 'unités')], default='u', max_length=10)),
            ],
        ),
        migrations.CreateModel(
            name='ViandeCouscous',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('portion', models.CharField(max_length=100)),
                ('supplement_inclus', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('supplement_extra', models.DecimalField(decimal_places=2, max_digits=5)),
            ],
        ),
        migrations.CreateModel(
            name='VilleDesservie',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ville', models.CharField(max_length=100)),
                ('code_postal', models.CharField(max_length=10)),
                ('nombre_habitants', models.IntegerField()),
                ('distance_gisors', models.FloatField()),
                ('temps_gisors', models.IntegerField()),
                ('zone', models.IntegerField()),
                ('panier_minimal', models.FloatField()),
                ('localisation', models.CharField(max_length=10)),
            ],
        ),
        migrations.CreateModel(
            name='AdresseLivraison',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('adresse', models.TextField()),
                ('code_postal', models.CharField(max_length=10)),
                ('ville', models.CharField(max_length=100)),
                ('zone', models.IntegerField()),
                ('localisation', models.CharField(max_length=5)),
                ('latitude', models.FloatField(blank=True, null=True)),
                ('longitude', models.FloatField(blank=True, null=True)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='adresses_livraison', to='swigo.client')),
            ],
        ),
        migrations.CreateModel(
            name='Commande',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_key', models.CharField(blank=True, max_length=100, null=True)),
                ('heure_creation', models.DateTimeField(auto_now_add=True)),
                ('societe', models.CharField(blank=True, max_length=120, null=True)),
                ('adresse_facturation_saisie', models.TextField(blank=True, null=True)),
                ('facture_sans_detail', models.BooleanField(default=False)),
                ('nom_saisi', models.CharField(blank=True, max_length=100, null=True)),
                ('prenom_saisi', models.CharField(blank=True, max_length=100, null=True)),
                ('telephone_saisi', models.CharField(blank=True, max_length=15, null=True)),
                ('email_saisi', models.EmailField(blank=True, max_length=254, null=True)),
                ('date_livraison_specifiee', models.DateField(blank=True, null=True)),
                ('heure_livraison_specifiee', models.TimeField(blank=True, null=True)),
                ('heure_livraison_asap', models.DateTimeField(blank=True, null=True)),
                ('horaire_verrouille', models.BooleanField(default=False, help_text='Empêche la modification automatique de l’horaire une fois la commande confirmée')),
                ('message_pour_chef', models.TextField(blank=True, null=True, verbose_name='Message pour le chef')),
                ('message_pour_livreur', models.TextField(blank=True, null=True, verbose_name='Message pour le livreur')),
                ('is_commande_a_emporter', models.BooleanField(default=False)),
                ('heure_commande_a_emporter', models.DateTimeField(blank=True, null=True)),
                ('commande_is_valid', models.BooleanField(default=False, help_text='Commande validée manuellement (paiement en main propre)')),
                ('is_paid', models.BooleanField(default=False)),
                ('heure_paiement', models.DateTimeField(blank=True, null=True)),
                ('moyen_paiement', models.CharField(blank=True, choices=[('stripe', 'Stripe (en ligne)'), ('especes_livraison', 'Espèces à la livraison'), ('ticket_livraison', 'Ticket resto à la livraison'), ('especes_retrait', 'Espèces au retrait'), ('ticket_retrait', 'Ticket resto au retrait')], help_text='Méthode de paiement choisie (non utilisé en cas de mixte)', max_length=30, null=True)),
                ('montant_especes', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('montant_ticket', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('montant_stripe', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('is_on_tour', models.BooleanField(default=False)),
                ('is_in_the_kitchen', models.BooleanField(default=False)),
                ('heure_in_the_kitchen', models.DateTimeField(blank=True, null=True)),
                ('cuisson_en_cours', models.BooleanField(default=False)),
                ('heure_cuisson_en_cours', models.DateTimeField(blank=True, null=True)),
                ('is_cooked', models.BooleanField(default=False)),
                ('heure_cooked', models.DateTimeField(blank=True, null=True)),
                ('is_ready_to_ship', models.BooleanField(default=False)),
                ('heure_ready_to_ship', models.DateTimeField(blank=True, null=True)),
                ('is_shipped', models.BooleanField(default=False)),
                ('heure_shipped', models.DateTimeField(blank=True, null=True)),
                ('is_delivered', models.BooleanField(default=False)),
                ('heure_delivered', models.DateTimeField(blank=True, null=True)),
                ('heure_pick_up_specifie', models.DateTimeField(blank=True, null=True)),
                ('is_ready_to_pick', models.BooleanField(default=False)),
                ('heure_ready_to_pick', models.DateTimeField(blank=True, null=True)),
                ('is_picked', models.BooleanField(default=False)),
                ('heure_picked', models.DateTimeField(blank=True, null=True)),
                ('is_ok_bar', models.BooleanField(default=False)),
                ('heure_ok_bar', models.DateTimeField(blank=True, null=True)),
                ('adresse_livraison', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.adresselivraison')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.client')),
            ],
        ),
        migrations.CreateModel(
            name='CouscousPersonnalise',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('option_xl', models.BooleanField(default=False)),
                ('prix_total', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('accompagnements', models.ManyToManyField(blank=True, to='swigo.accompagnementcouscous')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.client')),
                ('formule', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.formulecouscous')),
            ],
        ),
        migrations.CreateModel(
            name='ChoixViandeCouscous',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('est_incluse', models.BooleanField(default=False)),
                ('couscous', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.couscouspersonnalise')),
                ('viande', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.viandecouscous')),
            ],
        ),
        migrations.CreateModel(
            name='Facture',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero', models.CharField(max_length=30, unique=True)),
                ('date_emission', models.DateTimeField(default=django.utils.timezone.now)),
                ('montant_ht', models.DecimalField(decimal_places=2, max_digits=10)),
                ('tva_par_taux', models.JSONField(blank=True, default=dict, null=True)),
                ('montant_tva', models.DecimalField(decimal_places=2, max_digits=10)),
                ('montant_ttc', models.DecimalField(decimal_places=2, max_digits=10)),
                ('deja_reglee', models.BooleanField(default=False)),
                ('societe', models.CharField(blank=True, max_length=120, null=True)),
                ('adresse_facturation', models.TextField(blank=True)),
                ('facture_sans_detail', models.BooleanField(default=False)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='factures', to='swigo.client')),
                ('commande', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='facture', to='swigo.commande')),
            ],
        ),
        migrations.CreateModel(
            name='Ingredient',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('quantite_stock', models.PositiveIntegerField(default=0)),
                ('unite_stock', models.CharField(choices=[('g', 'grammes'), ('l', 'litres'), ('u', 'unités')], default='u', max_length=10)),
                ('prix_unitaire_achat', models.DecimalField(decimal_places=2, help_text="Prix d'achat moyen par unité de stock (€/g, €/ml ou €/u)", max_digits=10)),
                ('prix_unitaire_vente', models.DecimalField(blank=True, decimal_places=2, help_text='Prix de vente par unité de stock (€/g, €/ml ou €/u)', max_digits=10, null=True)),
                ('prix_supplement_salade', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('groupe', models.CharField(choices=[('fruits', 'Fruits'), ('legumes', 'Légumes'), ('feculents', 'Féculents'), ('vpo', 'Viande, Poissons, Oeufs (VPO)'), ('laitiers', 'Lait et produits laitiers'), ('gras', 'Matières grasses ajoutées'), ('sucres', 'Produits sucrés ou sucrés et gras'), ('boissons', 'Boissons'), ('epicerie', 'Epicerie'), ('epices', 'Epices'), ('herbes', 'Herbes'), ('melanges', 'melanges')], default='fruits', max_length=20)),
                ('vendable_directement', models.BooleanField(default=False, help_text="Indique si l'ingrédient est vendable directement.")),
                ('taux_tva_achat', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, default=5.5, help_text="TVA sur prix d'achat (%)", max_digits=4)),
                ('taux_tva_vente', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, default=10, help_text='TVA sur prix de vente (%)', max_digits=4)),
            ],
            options={
                'ordering': ['nom'],
                'indexes': [models.Index(fields=['nom'], name='swigo_ingre_nom_a8f0f0_idx'), models.Index(fields=['groupe'], name='swigo_ingre_groupe_abe9b8_idx')],
            },
        ),
        migrations.CreateModel(
            name='IngredientSaladeTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type_salade', models.CharField(choices=[('base', 'Base'), ('proteine', 'Protéine'), ('garniture', 'Garniture'), ('topping', 'Topping'), ('sauce', 'Sauce')], max_length=20)),
                ('ingredient', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='salade_tag', to='swigo.ingredient')),
            ],
        ),
        migrations.CreateModel(
            name='LigneFacture',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('description', models.CharField(max_length=255)),
                ('quantite', models.PositiveIntegerField()),
                ('prix_unitaire_ht', models.DecimalField(decimal_places=2, max_digits=10)),
                ('taux_tva', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, max_digits=4)),
                ('montant_ht', models.DecimalField(decimal_places=2, max_digits=10)),
                ('montant_tva', models.DecimalField(decimal_places=2, max_digits=10)),
                ('montant_ttc', models.DecimalField(decimal_places=2, max_digits=10)),
                ('facture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='swigo.facture')),
            ],
        ),
        migrations.CreateModel(
            name='ListeDeCourses',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(blank=True, null=True)),
                ('archived', models.BooleanField(default=False)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('nom', models.CharField(blank=True, max_length=100, unique=True)),
                ('fournisseur', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='listes_de_courses', to='swigo.fournisseur')),
            ],
        ),
        migrations.CreateModel(
            name='ArticleListeDeCourses',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantite', models.PositiveIntegerField(default=1)),
                ('unite', models.CharField(choices=[('g', 'grammes'), ('l', 'litres'), ('u', 'unités')], default='u', max_length=10)),
                ('est_achete', models.BooleanField(default=False, help_text="Indique si l'article a été acheté.")),
                ('prix_unitaire_achat', models.DecimalField(decimal_places=2, help_text="Prix d'achat au moment de l'ajout à la liste", max_digits=10)),
                ('ingredient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.ingredient')),
                ('liste', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='articles', to='swigo.listedecourses')),
            ],
        ),
        migrations.CreateModel(
            name='MouvementStock',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateTimeField(default=django.utils.timezone.now)),
                ('quantity', models.DecimalField(decimal_places=2, max_digits=10)),
                ('price_per_unit', models.DecimalField(decimal_places=2, max_digits=10)),
                ('ingredient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='mouvements_stock', to='swigo.ingredient')),
            ],
        ),
        migrations.CreateModel(
            name='Panier',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_key', models.CharField(max_length=255)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('frais_livraison', models.DecimalField(decimal_places=2, default=3.5, max_digits=5)),
                ('frais_gestion', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('promotion', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('sous_total', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('prix_total', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('is_locked', models.BooleanField(default=False)),
                ('code_promo', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.codepromo')),
                ('commande', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='panier_associe', to='swigo.commande')),
            ],
        ),
        migrations.AddField(
            model_name='commande',
            name='panier',
            field=models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='commande_associee', to='swigo.panier'),
        ),
        migrations.CreateModel(
            name='Plat',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('description_courte', models.TextField()),
                ('description_longue', models.TextField()),
                ('prix_unitaire_ttc', models.DecimalField(decimal_places=2, help_text='Prix unitaire TTC du plat', max_digits=10)),
                ('taux_tva', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, default=Decimal('10.0'), help_text='TVA en pourcentage', max_digits=4)),
                ('photo', models.ImageField(blank=True, null=True, upload_to='plats/')),
                ('disponible', models.BooleanField(default=True)),
                ('categorie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.categorie')),
            ],
        ),
        migrations.CreateModel(
            name='Option',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom_option', models.CharField(max_length=100)),
                ('prix_unitaire_ttc', models.DecimalField(decimal_places=2, help_text="Prix unitaire TTC de l'option", max_digits=5)),
                ('taux_tva', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, default=10, help_text='TVA sur prix de vente', max_digits=4)),
                ('plat', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.plat')),
            ],
        ),
        migrations.CreateModel(
            name='ComposantMenuFixe',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('salade', models.BooleanField(default=False)),
                ('couscous', models.BooleanField(default=False)),
                ('role', models.CharField(choices=[('entree', 'Entrée'), ('plat', 'Plat'), ('dessert', 'Dessert'), ('boisson', 'Boisson'), ('salade', 'Salade personnalisée'), ('couscous', 'Couscous personnalisé')], max_length=20)),
                ('menu', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='composants_fixes', to='swigo.menu')),
                ('plat', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.plat')),
            ],
        ),
        migrations.CreateModel(
            name='ArticlePanier',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom_personnalise', models.CharField(blank=True, max_length=255, null=True)),
                ('quantite', models.PositiveIntegerField(default=1)),
                ('prix_total', models.DecimalField(blank=True, decimal_places=2, default=Decimal('0.00'), max_digits=10, null=True)),
                ('couscous_personnalise', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.couscouspersonnalise')),
                ('menu', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.menu')),
                ('options', models.ManyToManyField(blank=True, to='swigo.option')),
                ('panier', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.panier')),
                ('plat', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.plat')),
            ],
        ),
        migrations.CreateModel(
            name='Cuisson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantite', models.PositiveIntegerField()),
                ('mode_cuisson', models.CharField(choices=[('grill', 'Grill'), ('josper', 'Josper'), ('friteuse', 'Friteuse'), ('cuiseur', 'Cuiseur')], max_length=50)),
                ('ingredient', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.ingredient')),
                ('option', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cuissons', to='swigo.option')),
                ('plat', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cuissons', to='swigo.plat')),
                ('produit_transforme', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.produittransforme')),
            ],
        ),
        migrations.CreateModel(
            name='ProduitVenteDirecte',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('prix_unitaire_vente_ttc', models.DecimalField(decimal_places=2, help_text='Prix de vente TTC du produit', max_digits=10)),
                ('taux_tva_vente', models.DecimalField(choices=[(5.5, '5,5%'), (10, '10%'), (20, '20%')], decimal_places=1, default=10, help_text='TVA en pourcentage', max_digits=4)),
                ('ingredient', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='produit_vente_directe', to='swigo.ingredient')),
            ],
        ),
        migrations.CreateModel(
            name='Recette',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('portions', models.PositiveIntegerField(default=1, help_text="Nombre d'unités obtenues (ex: 12 buns)")),
                ('temperature_cuisson', models.PositiveIntegerField(blank=True, help_text='°C', null=True)),
                ('duree_cuisson_minutes', models.PositiveIntegerField(blank=True, null=True)),
                ('prix_revient_unitaire_ht', models.DecimalField(blank=True, decimal_places=3, max_digits=10, null=True)),
                ('prix_revient_unitaire_ttc', models.DecimalField(blank=True, decimal_places=3, max_digits=10, null=True)),
                ('coefficient_vente', models.DecimalField(blank=True, decimal_places=2, help_text='x TTC (ex: 4.50)', max_digits=5, null=True)),
                ('produit', models.OneToOneField(help_text='Produit fabriqué par cette recette', on_delete=django.db.models.deletion.CASCADE, related_name='recette', to='swigo.produittransforme')),
            ],
            options={
                'abstract': False,
            },
            bases=(parler.models.TranslatableModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='EtapeRecette',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ordre', models.PositiveIntegerField()),
                ('duree_minutes', models.PositiveIntegerField(blank=True, null=True)),
                ('recette', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='etapes', to='swigo.recette')),
            ],
            options={
                'verbose_name': 'Étape de recette',
                'verbose_name_plural': 'Étapes de recettes',
                'ordering': ['ordre'],
            },
            bases=(parler.models.TranslatableModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='RecetteIngredient',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantite', models.DecimalField(decimal_places=2, max_digits=10)),
                ('unite', models.CharField(choices=[('g', 'grammes'), ('l', 'litres'), ('u', 'unités')], max_length=10)),
                ('ingredient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.ingredient')),
                ('recette', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ingredients', to='swigo.recette')),
            ],
        ),
        migrations.CreateModel(
            name='RecetteTranslation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('language_code', models.CharField(db_index=True, max_length=15, verbose_name='Language')),
                ('nom', models.CharField(max_length=120)),
                ('instructions_globales', models.TextField(blank=True)),
                ('master', parler.fields.TranslationsForeignKey(editable=False, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='translations', to='swigo.recette')),
            ],
            options={
                'verbose_name': 'recette Translation',
                'db_table': 'swigo_recette_translation',
                'db_tablespace': '',
                'managed': True,
                'default_permissions': (),
            },
            bases=(parler.models.TranslatedFieldsModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='SaladePersonnalisee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('prix_total', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('base', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='salade_bases', to='swigo.ingredient')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.client')),
                ('garnitures', models.ManyToManyField(blank=True, related_name='salade_garnitures', to='swigo.ingredient')),
                ('proteines', models.ManyToManyField(blank=True, related_name='salade_proteines', to='swigo.ingredient')),
                ('sauce', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='salade_sauces', to='swigo.ingredient')),
                ('supplement', models.ManyToManyField(blank=True, related_name='salade_supplements', to='swigo.ingredient')),
                ('toppings', models.ManyToManyField(blank=True, related_name='salade_toppings', to='swigo.ingredient')),
            ],
        ),
        migrations.CreateModel(
            name='ChoixMenuArticle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(choices=[('entree', 'Entrée'), ('plat', 'Plat'), ('dessert', 'Dessert'), ('boisson', 'Boisson'), ('salade', 'Salade personnalisée'), ('couscous', 'Couscous personnalisé')], max_length=20)),
                ('info_text', models.CharField(blank=True, max_length=200, null=True, verbose_name='Texte libre/affichage')),
                ('article_panier', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='choix_menu', to='swigo.articlepanier')),
                ('couscous', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.couscouspersonnalise')),
                ('plat_choisi', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.plat')),
                ('salade', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.saladepersonnalisee')),
            ],
        ),
        migrations.AddField(
            model_name='articlepanier',
            name='salade_personnalisee',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='swigo.saladepersonnalisee'),
        ),
        migrations.CreateModel(
            name='Tournee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.PositiveIntegerField()),
                ('id_tournee', models.CharField(max_length=14, unique=True)),
                ('date_tournee', models.DateField(default=django.utils.timezone.now)),
                ('heure_depart', models.DateTimeField(blank=True, null=True)),
                ('heure_retour_estime', models.DateTimeField(blank=True, null=True)),
                ('heure_retour_reel', models.DateTimeField(blank=True, null=True)),
                ('is_closed', models.BooleanField(default=False)),
                ('start_time', models.DateTimeField(blank=True, null=True)),
                ('heure_cloture', models.DateTimeField(blank=True, null=True)),
                ('is_ready_for_delivery', models.BooleanField(default=False)),
                ('is_sent_livreur', models.BooleanField(default=False)),
                ('is_started', models.BooleanField(default=False)),
                ('is_done', models.BooleanField(default=False)),
                ('is_figee', models.BooleanField(default=False)),
                ('livreur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='swigo.livreur')),
            ],
        ),
        migrations.CreateModel(
            name='TourneeCommande',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ordre', models.PositiveIntegerField(default=0)),
                ('heure_passage', models.DateTimeField(blank=True, null=True)),
                ('duree_trajet', models.PositiveIntegerField(blank=True, help_text='Temps de trajet en secondes depuis la commande précédente', null=True)),
                ('commande', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.commande')),
                ('tournee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='swigo.tournee')),
            ],
            options={
                'ordering': ['ordre'],
            },
        ),
        migrations.AddField(
            model_name='couscouspersonnalise',
            name='viandes_choisies',
            field=models.ManyToManyField(through='swigo.ChoixViandeCouscous', to='swigo.viandecouscous'),
        ),
        migrations.CreateModel(
            name='ChoixMenu',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(choices=[('entree', 'Entrée'), ('plat', 'Plat'), ('dessert', 'Dessert'), ('boisson', 'Boisson'), ('salade', 'Salade personnalisée'), ('couscous', 'Couscous personnalisé')], max_length=20)),
                ('autorise_salade_personnalisee', models.BooleanField(default=False)),
                ('autorise_couscous_personnalise', models.BooleanField(default=False)),
                ('nombre_viandes_incluses', models.PositiveIntegerField(default=1)),
                ('nombre_elements_inclus', models.IntegerField(default=1)),
                ('menu', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='choix', to='swigo.menu')),
                ('plats_possibles', models.ManyToManyField(blank=True, related_name='choix_de_menu', to='swigo.plat')),
                ('viandes_possibles', models.ManyToManyField(blank=True, related_name='choixmenu_autorises', to='swigo.viandecouscous')),
            ],
        ),
        migrations.CreateModel(
            name='EtapeRecetteTranslation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('language_code', models.CharField(db_index=True, max_length=15, verbose_name='Language')),
                ('titre', models.CharField(blank=True, max_length=120)),
                ('description', models.TextField()),
                ('master', parler.fields.TranslationsForeignKey(editable=False, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='translations', to='swigo.etaperecette')),
            ],
            options={
                'verbose_name': 'Étape de recette Translation',
                'db_table': 'swigo_etaperecette_translation',
                'db_tablespace': '',
                'managed': True,
                'default_permissions': (),
                'unique_together': {('language_code', 'master')},
            },
            bases=(parler.models.TranslatedFieldsModelMixin, models.Model),
        ),
        migrations.AddConstraint(
            model_name='listedecourses',
            constraint=models.UniqueConstraint(condition=models.Q(('archived', False)), fields=('fournisseur', 'date'), name='unique_active_list_per_fournisseur_and_date'),
        ),
        migrations.AlterUniqueTogether(
            name='recetteingredient',
            unique_together={('recette', 'ingredient')},
        ),
        migrations.AlterUniqueTogether(
            name='recettetranslation',
            unique_together={('language_code', 'master')},
        ),
        migrations.AlterUniqueTogether(
            name='tournee',
            unique_together={('nom', 'date_tournee')},
        ),
    ]
