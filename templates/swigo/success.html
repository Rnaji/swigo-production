{% extends 'swigo/elements/layouts/layout.html' %}
{% load static %}

{% block title %}
    Confirmation de commande - En Route Chef
{% endblock %}

{% block additional_css %}
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }

    .banner {
        background-color: white;
        text-align: center;
        padding: 12px 0;
        width: 100%;
    }

    .banner img {
        max-height: 180px;
        width: auto;
    }

    .confirmation-message {
        background-color: #fff;
        border-radius: 10px;
        padding: 20px;
        margin: 30px auto;
        max-width: 600px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    h1 {
        color: #4CAF50;
        font-size: 24px;
        margin-bottom: 10px;
    }

    p {
        color: #333;
        font-size: 16px;
        margin-bottom: 10px;
    }

    ul {
        text-align: left;
        padding-left: 20px;
    }

    li {
        margin-bottom: 10px;
    }

    strong {
        color: #4CAF50;
    }

    .label {
        font-weight: bold;
        color: #000;
    }

    .important-note {
        font-style: italic;
        color: #d32f2f;
    }

    .icon-row i {
    transition: transform 0.22s cubic-bezier(.6,-0.01,.35,.99), color 0.28s;
    cursor: pointer;
}
.icon-row i:hover {
    animation: shake 0.65s;
    color: var(--primary, #7DA640);
}

.icon-row {
        margin-top: 10px;
        display: flex;
        justify-content: center;
        gap: 20px;
        font-size: 32px;
        color: #4CAF50;

    }

@keyframes shake {
  0% { transform: translate(1px, 1px) rotate(0deg); }
  10% { transform: translate(-1px, -2px) rotate(-1deg); }
  20% { transform: translate(-3px, 0px) rotate(1deg); }
  30% { transform: translate(3px, 2px) rotate(0deg); }
  40% { transform: translate(1px, -1px) rotate(1deg); }
  50% { transform: translate(-1px, 2px) rotate(-1deg); }
  60% { transform: translate(-3px, 1px) rotate(0deg); }
  70% { transform: translate(3px, 1px) rotate(-1deg); }
  80% { transform: translate(-1px, -1px) rotate(1deg); }
  90% { transform: translate(1px, 2px) rotate(0deg); }
  100% { transform: translate(1px, -2px) rotate(-1deg); }
}
</style>
{% endblock %}

{% block content %}
<!-- Bannière avec logo -->
<section class="banner" style="background-color: white; text-align: center; padding: 12px 0;">
    <img src="{% static 'assets/images/logo-erc-noir1.png' %}" alt="En Route Chef" style="max-height: 90px; width: auto;">
    
    <div class="icon-row" style="margin-top: 10px; display: flex; justify-content: center; gap: 20px; font-size: 32px;">
        <i class="flaticon-burger"></i>
        <i class="flaticon-salade"></i>
        <i class="flaticon-tajine-1"></i>
        <i class="flaticon-poulet-frit"></i>
    </div>
</section>

<div class="confirmation-message">
    <h1>{{ message }}</h1>
    <p>Votre commande <strong>#{{ commande.id }}</strong> a été validée avec succès.</p>

    {% if commande.prenom_saisi or commande.nom_saisi %}
        <p><span class="label">Nom :</span> <strong>{{ commande.prenom_saisi }} {{ commande.nom_saisi }}</strong></p>
    {% endif %}

    {% if commande.adresse_livraison %}
        <p><span class="label">Adresse de livraison :</span> <strong>{{ commande.adresse_livraison }}</strong></p>
    {% endif %}

    {% if commande.telephone_saisi %}
        <p><span class="label">Téléphone :</span> <strong>{{ commande.telephone_saisi }}</strong></p>
    {% endif %}

    {% if commande.nom_saisi or commande.prenom_saisi or commande.adresse_livraison or commande.telephone_saisi or commande.email_saisi %}
        <p class="important-note">
            (En cas d'erreur, contactez-nous rapidement au <strong style="color: #d32f2f;">02 32 55 10 84</strong>)
        </p>
    {% endif %}

    {% if montant_total %}
        <p><span class="label">Montant à payer :</span> <strong>{{ montant_total|floatformat:2 }} €</strong></p>
    {% else %}
        <p><strong>Montant non disponible</strong></p>
    {% endif %}

    {% if commande.is_commande_a_emporter %}
        {% if creneau_retrait %}
            <p><span class="label">Créneau de retrait prévu :</span> <strong>{{ creneau_retrait }}</strong></p>
        {% elif commande.heure_pick_up_specifie %}
            <p><span class="label">Heure de retrait prévue :</span> <strong>{{ commande.heure_pick_up_specifie|date:"H:i" }}</strong></p>
        {% else %}
            <p>Heure de retrait non spécifiée.</p>
        {% endif %}
    {% else %}
        {% if creneau_livraison %}
            <p><span class="label">Créneau de livraison prévu :</span> <strong>{{ commande.date_livraison_specifiee|date:"d/m/Y" }} entre {{ creneau_livraison }}</strong></p>
        {% elif commande.heure_livraison_asap %}
            <p><span class="label">Heure estimée de livraison :</span> <strong>{{ commande.heure_livraison_asap|date:"H:i" }}</strong></p>
        {% else %}
            <p>Les informations de livraison ne sont pas encore disponibles.</p>
        {% endif %}
    {% endif %}

    <p><span class="label">Moyen de paiement :</span>
        <strong>
            {% if commande.is_paid %}
                Carte bancaire (en ligne)
            {% else %}
                {{ moyen_affiche }}
            {% endif %}
        </strong>
    </p>

    {% if commande.is_commande_a_emporter %}
        <p><span class="label">Voici comment va se dérouler le retrait :</span></p>
        <ul>
            <li>Votre commande sera prête à l'heure prévue.</li>
            <li>Présentez-vous à l'entrée du restaurant avec votre numéro de commande <strong>#{{ commande.id }}</strong>.</li>
        </ul>
    {% else %}
        <p><span class="label">Voici comment va se dérouler la livraison :</span></p>
        <ul>
            <li>Vous recevrez un SMS du livreur quelques minutes avant son arrivée.</li>
            <li>Le livreur vous appellera une minute avant son arrivée pour que vous puissiez l'attendre devant chez vous.</li>
        </ul>
    {% endif %}

    <p>Merci pour votre commande !</p>
</div>

{% endblock %}
